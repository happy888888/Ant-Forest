/*!
 * BUILD_ASSET_META_START {"type":"kylin-build","uniquename":"app/60000002","name":"60000002_ant-forest","hash":"d684ab843087ad1a19fc","chunk":"invite","time":1597914305298,"filename":"js/invite.d684ab8430.js","site":false,"fengdie":false} BUILD_ASSET_META_END
 */
webpackJsonp([3],{0:function(t,e,n){n(12),t.exports=n(266)},200:function(t,e,n){var a,i=n(6)(n(338),n(210),null,null,a);e.__esModule=!0,e.default=i.exports},201:function(t,e,n){var a;n(546);var i=n(6)(n(339),n(232),null,null,a);e.__esModule=!0,e.default=i.exports},202:function(t,e,n){var a;a={},a.banner=function(){var t=n(201);return t=t.default||t}(),a["invite-list"]=function(){var t=n(203);return t=t.default||t}(),a["award-list"]=function(){var t=n(200);return t=t.default||t}(),n(533);var i=n(6)(n(340),n(219),null,null,a);e.__esModule=!0,e.default=i.exports},203:function(t,e,n){var a;a={},a["v-avatar"]=function(){var t=n(16);return t=t.default||t}();var i=n(6)(n(341),n(221),null,null,a);e.__esModule=!0,e.default=i.exports},210:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["INVITE_SUCCESS"==t.status?n("div",{staticClass:"desc-text"},[n("p",[t._v("共获得道具："+t._s(t.recordCount.awardTotalCount||0))]),t._v(" "),t.recordCount.onTheWayCount>0?n("p",{on:{click:t.onClickOntheway}},[t._v(t._s(t.recordCount.onTheWayCount)+"个正在路上 >")]):t._e()]):t._e(),t._v(" "),n("ul",{ref:"rewardList",staticClass:"reward-list"},t._l(t.awardList,function(e,a){return n("li",{key:a},["P2P_END"===e.status?[n("p",{staticClass:"text"},[t._v(t._s(e.objectUser.displayName)+" 领取了"+t._s(e.awardBeInvitedDesc)+"，你的"+t._s(e.awardInviterDesc)+"已存入背包")]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(t._f("parseLatestDynamicTime")(e.gmtModified)))])]:"P2P_INVITE_SUCCESS"===e.status?[n("p",{staticClass:"text"},[t._v(t._s(e.objectUser.displayName)+" 领取了"+t._s(e.awardBeInvitedDesc))]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(t._f("parseLatestDynamicTime")(e.gmtModified)))])]:"P2P_INIT"===e.status?[n("p",{staticClass:"text"},[t._v("送给 "+t._s(e.objectUser.displayName)+" "+t._s(e.awardBeInvitedCount||1)+"个"+t._s(e.awardBeInvitedDesc)+"，等待TA领取")]),t._v(" "),n("p",{staticClass:"time"},[t._v("赠送时间 "+t._s(t._f("parseLatestDynamicTime")(e.gmtModified)))])]:t._e()],2)})),t._v(" "),!t.hasMore&&t.awardList.length?n("p",{staticClass:"load-text"},[t._v("没有更多了")]):t._e(),t._v(" "),t.hasMore||t.awardList.length?t._e():n("p",{staticClass:"load-text"},[t._v("暂无获奖记录")]),t._v(" "),t.loadingAward?n("p",{staticClass:"load-text"},[t._v("加载中...")]):t._e()])},staticRenderFns:[]}},219:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"af-body invite"},["1"===t.pageType?n("div",{staticClass:"page-1"},[n("div",{staticClass:"tabs"},[n("div",{class:{"tab-item":!0,act:1===t.tab},on:{click:function(e){t.onChangeTab(1)}}},[t._v("赠送好友")]),t._v(" "),n("div",{class:{"tab-item":!0,act:2===t.tab},on:{click:function(e){t.onChangeTab(2)}}},[t._v("赠送记录")])]),t._v(" "),1===t.tab?n("div",[n("banner"),t._v(" "),n("invite-list")],1):t._e(),t._v(" "),2===t.tab?n("div",[n("award-list",{attrs:{status:"INVITE_SUCCESS"}})],1):t._e()]):n("div",{staticClass:"page-2"},[n("award-list",{attrs:{status:"ON_THE_WAY"}})],1)])},staticRenderFns:[]}},221:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.inviteTired?n("p",{staticClass:"invite-tired"},[t._v("今日送出已达上限，明日再来吧")]):t._e(),t._v(" "),!t.loadingPerson&&t.list.length?n("ul",{staticClass:"invite-list"},t._l(t.list,function(e){return n("li",{key:e.userId},[n("v-avatar",{staticClass:"item-avatar",attrs:{url:e.headPortrait}}),t._v(" "),n("div",{staticClass:"item-name"},[t._v(t._s(e.memo||e.nickName||e.displayName||"一个好友"))]),t._v(" "),"HAS_INVITED"===e.inviteStatus?n("div",{staticClass:"item-btn disable"},[n("button",[t._v("已赠送")])]):t.inviteTired||"CAN_INVITE"!==e.inviteStatus?n("div",{staticClass:"item-btn disable"},[n("button",[t._v("已到上限")])]):n("div",{staticClass:"item-btn"},[n("button",{on:{click:function(n){t.onInvite(e.userId)}}},[t._v("送给TA")])])],1)})):t.loadingPerson||t.list.length?n("p",{staticClass:"load-text"},[t._v("加载中...")]):n("div",{staticClass:"no-more"},[n("img",{attrs:{src:"https://gw.alipayobjects.com/mdn/social_tod/afts/img/A*sjcvRZm1OXUAAAAAAAAAAABjARQnAQ"}})])])},staticRenderFns:[]}},232:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"invite-banner",style:{backgroundImage:"url("+t.img+")"},on:{click:t.onClickBanner}})},staticRenderFns:[]}},266:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.default?(0,c.default)(t,e):t.__proto__=e)}function s(t){window.AlipayJSBridge&&window.AlipayJSBridge.call?t():navigator.userAgent.indexOf("AlipayClient")>=0?document.addEventListener("AlipayJSBridgeReady",t,!0):t()}function u(){var t=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.initOptions=function(){return{store:_.default,router:void 0}},e.prototype.render=function(t){return t(m.default)},e}(p.Page),e=new t("#app");return e._vue}var d=n(9),c=a(d),l=n(13),f=(a(l),n(296)),p=(a(f),n(4)),v=n(286),_=a(v),h=n(202),m=a(h);_.default&&s(function(){_.default.dispatch("pageBeforeRender")}),function(t){window.AlipayJSBridge&&window.AlipayJSBridge.call?setTimeout(t,0):navigator.userAgent.indexOf("AlipayClient")>=0?document.addEventListener("AlipayJSBridgeReady",t,!0):setTimeout(t,0)}(u)},276:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(){return r?r:r="undefined"!=typeof window&&window.Promise&&"function"==typeof window.Promise.resolve?window.Promise:n(1).default||n(1)}Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(8),s=a(o),u=s.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},d=n(2),c=a(d),l=n(3),f=a(l),p={size:20,start:1},v="",_="";e.default={state:{pageType:1,personList:[],awardList:[],loadingPerson:!1,loadingAward:!1,inviteTired:!1,recordCount:{},hasMore:!0},mutations:{updatePageType:function(t,e){t.pageType=e},updateLoadingPerson:function(t,e){t.loadingPerson=e},updateLoadingAward:function(t,e){t.loadingAward=e},updatePersonList:function(t,e){t.personList=e},updateAwardList:function(t,e){t.awardList=e},updateInviteTired:function(t,e){t.inviteTired=e},updateRecordCount:function(t,e){t.recordCount=e},updateHasMore:function(t,e){t.hasMore=e}},actions:{pageBeforeRender:function(t){var e=t.commit,n=luna.urlParam.get("type")||"1";e("updatePageType",n)},loadInviteList:function(t){return new(i())(function(e,n){var a,r,o;return a=t.commit,a("updateLoadingPerson",!0),i().resolve(c.default.rpc.canInvitePersonListP2P()).then(function(t){try{return r=t,r.error?(a("updateLoadingPerson",!1),e()):(a("updateInviteTired",r.inviteTired),o=r.p2pCanInvitePersonDetailList||[],a("updatePersonList",o),a("updateLoadingPerson",!1),v=r.bizTraceId,i().resolve(f.default.native.getUserId()).then(function(t){try{return _=t,o.length&&!r.inviteTired&&Tracert.expo("c26812.d50686"),e()}catch(t){return n(t)}}.bind(this),n))}catch(t){return n(t)}}.bind(this),n)}.bind(this))},invitePerson:function(t,e){return new(i())(function(n,a){var r,o,s,u;return r=t.commit,o=t.dispatch,s=e.uid,i().resolve(c.default.rpc.inviteP2P(s,v)).then(function(t){try{return u=t,u.success&&(o("updatePerson",{data:{inviteStatus:"HAS_INVITED"},uid:s}),r("updateInviteTired",u.inviteTired)),Tracert.click("c26812.d50686",{user_id:_,rec_user_id:s,trace_id:v}),n(u)}catch(t){return a(t)}}.bind(this),a)}.bind(this))},updatePerson:function(t,e){var n=t.commit,a=t.state,i=e.data,r=e.uid,o=a.personList.map(function(t){return t.userId===r?u({},t,i):t});n("updatePersonList",o)},loadAwardList:function(t,e){return new(i())(function(n,a){var r,o,s,d,l,v,_;return r=t.commit,o=t.state,s=e.status,d=e.init,d&&(p.start=1,r("updateAwardList",[]),r("updateHasMore",!0)),!o.hasMore||o.loadingAward?n():(r("updateLoadingAward",!0),i().resolve(c.default.rpc.listP2PRecordByStatus(p.start,p.size,s)).then(function(t){function e(){return n()}try{return l=t,l.success?(v=c.default.props.getAwardInfoObj(),_=l.recordStatusList.map(function(t){return u({},t,{awardInviterDesc:(v[t.awardInviterType]||{}).name,awardBeInvitedDesc:(v[t.awardBeInvitedType]||{}).name,objectUser:{userId:t.objectUserId,displayName:"你的好友"}})}),l.recordStatusList=_,i().resolve(c.default.relation.queryLocalSocialInfo({result:l,pathList:["recordStatusList"],propPath:["objectUser"]})).then(function(t){try{return l=t,p.start=l.nextStartIndex||1,r("updateAwardList",[].concat(o.awardList,l.recordStatusList)),r("updateRecordCount",{onTheWayCount:l.onTheWayCount,inviteTotalCount:l.inviteTotalCount,awardTotalCount:l.awardTotalCount}),r("updateHasMore",l.hasMore),r("updateLoadingAward",!1),e.call(this)}catch(t){return a(t)}}.bind(this),a)):(f.default.native.toast("人气太旺，请稍后再试"),setTimeout(function(){r("updateLoadingAward",!1)},2e3),e.call(this))}catch(t){return a(t)}}.bind(this),a))}.bind(this))}}}},286:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(276),r=a(i),o=n(4);r.default.strict=!1,r.default.plugins=[];var s=new o.Store(r.default);o.Store.setInstance?o.Store.setInstance(s):o.Store.getInstance=function(){try{console.warn(["Store.getInstance is deprecated, please use :",'import { Instance } from "@ali/kylin-framework";',"Instance.getStore();"].join("\n"))}catch(t){}return s},o.Instance&&o.Instance.setStore&&o.Instance.setStore(s),e.default=s},296:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}n(18);var i=n(2),r=a(i),o=n(3),s=a(o),u=n(19),d=a(u),c=function(){s.default.time.init(),r.default.drm.init(),s.default.html.setHTMLFontSize(),(0,d.default)(window.FastClick)};luna.ready(function(){c()})},338:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(4),r=n(5),o=a(r),s=n(3),u=a(s),d=i.Component.Object({mapStateToProps:{awardList:function(t){return t.awardList},loadingAward:function(t){return t.loadingAward},recordCount:function(t){return t.recordCount},hasMore:function(t){return t.hasMore}}})(function(){var t={name:"IndexView",props:{awardList:Array,loadingAward:Boolean,recordCount:Object,hasMore:!0,status:String},mounted:function(){var t=this;this._loadMore(!0),window.onscroll=function(){u.default.html.isReachBottom()&&t._loadMore()},"ON_THE_WAY"===this.status?Tracert.expo("c26813.d50685"):"INVITE_SUCCESS"===this.status&&Tracert.expo("c26813.d50684")},methods:{_loadMore:function(t){this.loadingAward||!t&&!this.hasMore||this.$store.dispatch("loadAwardList",{status:this.status,init:t})},onClickOntheway:function(){o.default.call("pushWindow",{url:"invite.html?type=2",param:{transparentTitle:"none",backgroundColor:-1}}),Tracert.click("c26813.d50685")}}};return t});e.default=d},339:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(4),r=n(5),o=a(r),s=n(2),u=a(s),d="https://gw.alipayobjects.com/mdn/social_todo/afts/img/A*2Gy3SYajm4AAAAAAAAAAAABjARQnAQ",c=i.Component.Object()(function(){var t={name:"IndexView",props:{},data:function(){return{img:"",link:""}},created:function(){var t=u.default.drm.get("inviteBannerImg"),e=u.default.drm.get("inviteBannerLink");this.img=t||d,this.link=e||""},methods:{onClickBanner:function(){this.link&&o.default.call("pushWindow",{url:this.link,param:{transparentTitle:"none",backgroundColor:-1}})}}};return t});e.default=c},340:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(4),i=a.Component.Object({mapStateToProps:{pageType:function(t){return t.pageType}}})(function(){var t={name:"IndexView",props:{pageType:String},data:function(){return{tab:1}},mounted:function(){Tracert.expo("c26813")},methods:{onChangeTab:function(t){this.tab=t}}};return t});e.default=i},341:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(){return r?r:r="undefined"!=typeof window&&window.Promise&&"function"==typeof window.Promise.resolve?window.Promise:n(1).default||n(1)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=n(4),s=n(3),u=a(s),d={600000003:"今日赠送已达上限，明日再来吧",600000002:"已经有人送过TA了，去赠送给其他小伙伴吧",600000001:"TA还不是你的好友，去赠送给其他小伙伴吧"},c=o.Component.Object({mapStateToProps:{personList:function(t){return t.personList},loadingPerson:function(t){return t.loadingPerson},inviteTired:function(t){return t.inviteTired}}})(function(){var t={name:"IndexView",props:{personList:Array,loadingPerson:Boolean,inviteTired:Boolean},data:function(){return{posting:!1}},computed:{list:{get:function(){return this.personList.filter(function(t){return!t.hasInvited})}}},mounted:function(){this.$store.dispatch("loadInviteList")},methods:{onInvite:function(t){return new(i())(function(e,n){var a,r;return this.posting?e():(this.posting=!0,i().resolve(this.$store.dispatch("invitePerson",{uid:t})).then(function(i){try{return a=i,a.success?u.default.native.toast("赠送成功，待TA领取"):a.error&&(r=d[a.error.code]||"人气太旺，请稍后再试",u.default.native.toast(r),"600000002"===a.error.code&&this.$store.dispatch("updatePerson",{data:{hasInvited:!0},uid:t})),this.posting=!1,e()}catch(t){return n(t)}}.bind(this),n))}.bind(this))}}};return t});e.default=c},533:function(t,e){},546:function(t,e){}});